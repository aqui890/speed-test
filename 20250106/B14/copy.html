<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>원 내부 퍼센트 채우기</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
    }
    input {
      margin: 5px;
      padding: 5px;
      width: 120px;
    }
  </style>
</head>
<body>

  <h2>원 내부 퍼센트 채우기</h2>

  <input id="labelInput" placeholder="항목명" />
  <input id="percentInput" type="number" min="0" max="100" placeholder="퍼센트" />

  <br />

  <canvas id="canvas" width="300" height="300"></canvas>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    const labelInput = document.getElementById("labelInput");
    const percentInput = document.getElementById("percentInput");

    function draw(percent = 0, label = "") {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const cx = 150;
      const cy = 150;
      const radius = 100;

      // 1️⃣ 원 테두리
      ctx.beginPath();
      ctx.arc(cx, cy, radius, 0, Math.PI * 2);
      ctx.strokeStyle = "#333";
      ctx.lineWidth = 4;
      ctx.stroke();

      // 2️⃣ 원 내부를 클리핑
      ctx.save();
      ctx.beginPath();
      ctx.arc(cx, cy, radius - 2, 0, Math.PI * 2);
      ctx.clip();

      // 3️⃣ 퍼센트만큼 내부 채우기 (아래 → 위)
      const fillHeight = (percent / 100) * radius * 2;

      ctx.fillStyle = "#4caf50";
      ctx.fillRect(
        cx - radius,
        cy + radius - fillHeight,
        radius * 2,
        fillHeight
      );

      ctx.restore();

      // 4️⃣ 텍스트
      ctx.fillStyle = "#333";
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";

      ctx.font = "24px Arial";
      ctx.fillText(`${percent}%`, cx, cy - 10);

      ctx.font = "14px Arial";
      ctx.fillText(label, cx, cy + 15);
    }

    function update() {
      const percent = Math.min(100, Math.max(0, Number(percentInput.value)));
      const label = labelInput.value;
      draw(percent, label);
    }

    labelInput.addEventListener("input", update);
    percentInput.addEventListener("input", update);

    draw(0, "");
  </script>

</body>
</html>
